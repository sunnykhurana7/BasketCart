<!Doctype html>
<html>
  <head>
      <title>Basket</title>

      <!-- css code -->
      <link href="css/index.css" rel="stylesheet" type="text/css">

      <!-- Jquery -->
      <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>


      <!-- Script -->
      <script type="text/javascript">

        $(document).ready(function(){

          // console.log(document.getElementsByClassName('subtotal')[0].innerHTML);

          $(".delete").click(function(){

            $(this).closest('tr').remove();

            var total = 0;
            $("tr.item").each(function(){

              total+= parseInt($(this).find('.cost').text());

            });

            document.getElementsByClassName('subtotal')[0].innerHTML = total;

            var vat = (total * 20)/100;

            document.getElementsByClassName('vat')[0].innerHTML = vat;

            var totalcost = vat + total;

            document.getElementsByClassName('totalcost')[0].innerHTML = totalcost;

          });


          var total = 0;
          $("tr.item").each(function(){

            total+= parseInt($(this).find('.cost').text());

          });

          document.getElementsByClassName('subtotal')[0].innerHTML = total;

          var vat = (total * 20)/100;

          document.getElementsByClassName('vat')[0].innerHTML = vat;

          var totalcost = vat + total;

          document.getElementsByClassName('totalcost')[0].innerHTML = totalcost;


          $(".costupdate").change(function(){

            var price = $(this).closest('tr').find('.price').text();

            // for qty
            // alert($(this).closest('td').find(input[type="number"]).value);

            // alert($(this).closest('tr').find('.counter').text());

            var obj = $(this).closest(('.costupdate'));
            var qty = obj[0].value;

            var cost = price * qty;

            // for cost
            $(this).closest('tr').find('.cost').text(cost);

            // loop for printing the total
            var total = 0;
            // for loop to sum the cost and find vat
            $("tr.item").each(function(){

              total+= parseInt($(this).find('.cost').text());

            });

            document.getElementsByClassName('subtotal')[0].innerHTML = total;


            var vat = (total * 20)/100;

            document.getElementsByClassName('vat')[0].innerHTML = vat;


            var totalcost = vat + total;

            document.getElementsByClassName('totalcost')[0].innerHTML = totalcost;


          })



        });

      </script>


      <body>

        <div class="web">

          <div class="main">

            <!-- Start Header -->
            <div class="header">
                <img src="images/to_the_new.jpg">
            </div>
            <!-- End Header -->

            <div class="content">

                <span class="titles">Your Basket</span>
                <p class="description">
                  Items you have added to your basket are shown below.<br />
                  Adjust the quantities or remove items before continuing your purchase.
                </p>

                <!--  Product Listing -->
                <div class="productlisting">
                    <table>
                        <thead>
                            <tr>
                                <th class="product">Product</th>
                                <th>Price</th>
                                 <th>Qty</th>
                                <th>Cost</th>
                            </tr>
                        </thead>

                        <tbody>
                            <tr class="item">
                              <td title="Cotton T-shirt,Medium">Cotton T-shirt,Medium</td>
                              <td class="price">200</td>
                              <td class="counter">
                                <input type="number" min="1" max="10" class="costupdate" value="1">
                              </td>
                              <td class="cost">200</td>
                              <td>
                                <img src="images/Trash-512.png" title="Delete" class="delete">
                              </td>
                            </tr>

                            <tr class="item">
                              <td title="Baseball Cap,One Size">Baseball Cap,One Size</td>
                              <td class="price">300</td>
                              <td class="counter">
                                <input type="number" min="1" max="10"  value="1" class="costupdate" >
                              </td>
                              <td class="cost">300</td>
                              <td>
                                <img src="images/Trash-512.png" title="Delete" class="delete">
                                </td>
                            </tr>

                            <tr class="item">
                              <td title="Swim Shorts,Medium">Swim Shorts,Medium</td>
                              <td class="price">400</td>
                              <td class="counter">
                                <input type="number" min="1" max="10"  value="1" class="costupdate">
                              </td>
                              <td class="cost">400</td>
                              <td>
                                <img src="images/Trash-512.png" title="Delete" class="delete">
                              </td>
                            </tr>

                              <tr>
                                  <td colspan="3">Subtotal</td>
                                  <td class="subtotal">240</td>
                              </tr>
                              <tr>
                                  <td colspan="3">VAT@20%</td>
                                  <td class="vat"> 240</td>
                              </tr>

                                <tr>
                                  <td colspan="3">Total Cost</td>
                                  <td class="totalcost">480</td>
                                </tr>

                        <tbody>
                    </table>

                  <div class="buynow">
                      <input type="submit" value="Buy Now">
                  </div>
                </div>
            </div>
          </div>



        </div>

      </body>
  </head>
</html>
